\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}
\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}
\usepackage{array}
\usepackage[nottoc,numbib]{tocbibind}
\usepackage{adjustbox}


\hypersetup{
	bookmarks=true,         % show bookmarks bar?
	colorlinks=true,        % false: boxed links; true: colored links
	linkcolor=red,          % color of internal links (change box color with linkbordercolor)
	citecolor=blue,         % color of links to bibliography
	filecolor=magenta,      % color of file links
	urlcolor=cyan           % color of external links
}


\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{table}[hp]
	\caption{Revision History} \label{TblRevisionHistory}
	\begin{tabularx}{\textwidth}{llX}
		\toprule
		\textbf{Date}     & \textbf{Developer(s)} & \textbf{Change}                      \\
		\midrule
		December 28, 2022 & Arkin Modi            & Create Revision History              \\
		January 7, 2023   & Joy Xiao              & Introduction                         \\
		January 9, 2023   & Arkin Modi            & Add Module Hierarchy                 \\
		January 11, 2023  & Arkin Modi            & Create MIS of User Module            \\
		January 13, 2023  & Arkin Modi            & Create MIS of Database Driver Module \\
		\bottomrule
	\end{tabularx}
\end{table}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at
\url{https://github.com/arkinmodi/project-sayyara/blob/main/docs/SRS/SRS.pdf}

\wss{Also add any additional symbols, abbreviations or acronyms}

\begin{tabular}{l l}
	\toprule
	\textbf{symbol} & \textbf{description}            \\
	\midrule
	\progname       & Explanation of program name     \\
	MIS             & Module Interface Specifications \\
	MG              & Module Guide                    \\
	\bottomrule
\end{tabular}

\newpage

\tableofcontents

\newpage

\listoftables

\listoffigures

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for project Sayyara. Sayyara is
a progressive web application (PWA) which will act as a single platform for independent auto repair
shops and vehicle owners. This platform will allow independent auto repair shops and vehicle owners
to interact in a more efficient and effective manner. Vehicle owners can search for auto repair
shops and services; request quotes for service; book, view, and manage service appointments. On the
application, auto repair shop owners will be able to manage a list of employees; manage a list of
service types and corresponding service appointment availabilities; manage store information such
as location, hours of operation, and contact information. Auto repair shop owners and employees
will be able to manage quotes, service appointments, and work orders from a single application. The
MIS will detail specifications for the project described above.

Complementary documents include the System Requirement Specifications and Module Guide. The full
documentation and implementation can be found at
\url{https://github.com/arkinmodi/project-sayyara/}.

\section{Notation}

\wss{You should describe your notation.  You can use what is below as
	a starting point.}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995}, with the addition
that template modules have been adapted from \cite{GhezziEtAl2003}. The mathematical notation comes
from Chapter 3 of \citet{HoffmanAndStrooper1995}. For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1 \Rightarrow r_1 | c_2
	\Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname.

\begin{center}
	\renewcommand{\arraystretch}{1.2}
	\noindent
	\begin{tabular}{l l p{7.5cm}}
		\toprule
		\textbf{Data Type} & \textbf{Notation} & \textbf{Description}                                             \\
		\midrule
		character          & char              & a single symbol or digit                                         \\
		integer            & $\mathbb{Z}$      & a number without a fractional component in (-$\infty$, $\infty$) \\
		natural number     & $\mathbb{N}$      & a number without a fractional component in [1, $\infty$)         \\
		real               & $\mathbb{R}$      & any number in (-$\infty$, $\infty$)                              \\
		\bottomrule
	\end{tabular}
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[H]
	\centering
	\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
		\toprule
		\textbf{Level 1}                                      & \textbf{Level 2}           \\
		\midrule

		Hardware-Hiding Module                                & ~                          \\

		\midrule

		\multirow{8}{0.3\textwidth}{Behaviour-Hiding Module}  & Users Module               \\
		                                                      & Quotes Module              \\
		                                                      & Appointments Module        \\
		                                                      & Work Orders Module         \\
		                                                      & Employee Management Module \\
		                                                      & Services Module            \\
		                                                      & Shop Lookup Module         \\
		                                                      & Shop Profile Module        \\
		\midrule

		\multirow{1}{0.3\textwidth}{Software Decision Module} & Database Driver Module     \\

		\bottomrule
	\end{tabular}
	\caption{Module Hierarchy}
	\label{TblMH}
\end{table}

\newpage

\section{MIS of Database Driver Module} \label{mDBDriver}
\subsection{Module}

schema.prisma

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Types}

\textbf{Employee}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type}  & \textbf{Description}                    \\
		\hline
		id                   & String                & ID of Employee                          \\
		\hline
		create\_time         & String                & Create Time of Employee Account         \\
		\hline
		update\_time         & String                & Update Time of Employee Account         \\
		\hline
		first\_name          & String                & First Name of Employee                  \\
		\hline
		last\_name           & String                & Last Name of Employee                   \\
		\hline
		phone\_number        & String                & Phone Number of Employee                \\
		\hline
		email                & String                & Email of Employee                       \\
		\hline
		password             & String                & Password of Employee's Account          \\
		\hline
		type                 & String                & Type of User                            \\
		\hline
		shop                 & Shop                  & Shop which Employee is registered under \\
		\hline
		appointments         & List$<$Appointment$>$ & Appointments assigned to the Employee   \\
		\hline
	\end{tabular}
\end{table}

\textbf{Customer}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type}  & \textbf{Description}                  \\
		\hline
		id                   & String                & ID of Customer                        \\
		\hline
		create\_time         & String                & Create Time of Customer Account       \\
		\hline
		update\_time         & String                & Update Time of Customer Account       \\
		\hline
		first\_name          & String                & First Name of Customer                \\
		\hline
		last\_name           & String                & Last Name of Customer                 \\
		\hline
		phone\_number        & String                & Phone Number of Customer              \\
		\hline
		email                & String                & Email of Customer                     \\
		\hline
		password             & String                & Password of Customer's Account        \\
		\hline
		type                 & String                & Type of User                          \\
		\hline
		appointments         & List$<$Appointment$>$ & Appointments assigned to the Customer \\
		\hline
		chat\_messages       & List$<$ChatMessage$>$ & Chat Messages sent by the Customer    \\
		\hline
		quotes               & List$<$Quote$>$       & Quotes initiated by the Customer      \\
		\hline
		vehicles             & List$<$Vehicle$>$     & Vehicles associated with the Customer \\
		\hline
	\end{tabular}
\end{table}

\textbf{Appointment}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type}   & \textbf{Description}           \\
		\hline
		id                   & String                 & ID of Appointment              \\
		\hline
		create\_time         & String                 & Create Time of Appointment     \\
		\hline
		update\_time         & String                 & Update Time of Appointment     \\
		\hline
		quote                & Optional$<$Quote$>$    & Associated Quote               \\
		\hline
		work\_order          & Work Order             & Associated Work Order          \\
		\hline
		vehicle              & Vehicle                & Associated Vehicle             \\
		\hline
		service\_type        & String                 & Type of Service                \\
		\hline
		employee             & Optional$<$Employee$>$ & Assigned Employee              \\
		\hline
		customer             & Customer               & Assigned Customer              \\
		\hline
		status               & String                 & Progress Status of Appointment \\
		\hline
		start\_time          & DateTime               & Start Time                     \\
		\hline
		end\_time            & DateTime               & End Time                       \\
		\hline
		shop                 & Shop                   & Associated Shop                \\
		\hline
	\end{tabular}
\end{table}

\textbf{Quote}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type}      & \textbf{Description}     \\
		\hline
		id                   & String                    & ID of Quote              \\
		\hline
		create\_time         & String                    & Create Time of Quote     \\
		\hline
		update\_time         & String                    & Update Time of Quote     \\
		\hline
		customer             & Customer                  & Assigned Customer        \\
		\hline
		shop                 & Shop                      & Associated Shop          \\
		\hline
		appointment          & Optional$<$Appointment$>$ & Associated Appointment   \\
		\hline
		chat\_messages       & List$<$ChatMessage$>$     & Associated Chat Messages \\
		\hline
	\end{tabular}
\end{table}

\textbf{ChatMessage}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type} & \textbf{Description}        \\
		\hline
		id                   & String               & ID of Chat Message          \\
		\hline
		create\_time         & String               & Create Time of Chat Message \\
		\hline
		update\_time         & String               & Update Time of Chat Message \\
		\hline
		message              & String               & Chat Message                \\
		\hline
		quote                & Quote                & Associated Quote            \\
		\hline
		customer             & Customer             & Associated Customer         \\
		\hline
		shop                 & Shop                 & Associated Shop             \\
		\hline
	\end{tabular}
\end{table}

\textbf{Vehicle}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type}  & \textbf{Description}                 \\
		\hline
		id                   & String                & ID of the Vehicle                    \\
		\hline
		create\_time         & String                & Create Time of the Vehicle           \\
		\hline
		update\_time         & String                & Update Time of the Vehicle           \\
		\hline
		year                 & $\mathbb{N}$          & Model Year of the Vehicle            \\
		\hline
		make                 & String                & Make of the Vehicle                  \\
		\hline
		model                & String                & Model of the Vehicle                 \\
		\hline
		vin                  & String                & VIN of the Vehicle                   \\
		\hline
		license\_plate       & String                & License Plate of the Vehicle         \\
		\hline
		customer             & Customer              & Associated Customer                  \\
		\hline
		appointments         & List$<$Appointment$>$ & Appointments assigned to the Vehicle \\
		\hline
	\end{tabular}
\end{table}

\textbf{WorkOrder}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type} & \textbf{Description}      \\
		\hline
		id                   & String               & ID of Work Order          \\
		\hline
		create\_time         & String               & Create Time of Work Order \\
		\hline
		update\_time         & String               & Update Time of Work Order \\
		\hline
		appointment          & Appointment          & Associated Appointment    \\
		\hline
		title                & String               & Title of Work Order       \\
		\hline
		customer             & Customer             & Assigned Customer         \\
		\hline
		vehicle              & Vehicle              & Associated Vehicle        \\
		\hline
		employee             & Employee             & Assigned Employee         \\
		\hline
		body                 & String               & Work Order Details        \\
		\hline
		shop                 & Shop                 & Associated Shop           \\
		\hline
	\end{tabular}
\end{table}

\textbf{Shop}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type}  & \textbf{Description}               \\
		\hline
		id                   & String                & ID of Shop                         \\
		\hline
		create\_time         & String                & Create Time of Shop                \\
		\hline
		update\_time         & String                & Update Time of Shop                \\
		\hline
		appointments         & List$<$Appointment$>$ & Appointments assigned to Shop      \\
		\hline
		employees            & List$<$Employee$>$    & List of Employee assigned to Shop  \\
		\hline
		chat\_messages       & List$<$ChatMessage$>$ & List of Chat Messages sent by Shop \\
		\hline
		quotes               & List$<$Quote$>$       & List of Quotes                     \\
		\hline
		services             & List$<$Service$>$     & List of offered Services           \\
		\hline
	\end{tabular}
\end{table}

\subsubsection{Exported Access Programs}

None
\subsection{Semantics}

\subsubsection{State Variables}

None

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

None

\subsubsection{Access Routine Semantics}

None

\subsubsection{Local Functions}

None

\newpage

\section{MIS of Users Module} \label{mUsers}
\subsection{Module}

userService

\subsection{Uses}

Database Driver Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Types}

\textbf{CreateCustomerType}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name}   & \textbf{Output Type} & \textbf{Description}                \\
		\hline
		email                  & String               & Email of Customer                   \\
		\hline
		password               & String               & Password of Customer Account        \\
		\hline
		first\_name            & String               & First Name of Customer              \\
		\hline
		last\_name             & String               & Last Name of Customer               \\
		\hline
		phone\_number          & String               & Phone Number of Customer            \\
		\hline
		vehicle.year           & $\mathbb{N}$         & Model Year of Customer's Vehicle    \\
		\hline
		vehicle.make           & String               & Make of Customer's Vehicle          \\
		\hline
		vehicle.model          & String               & Model of Customer's Vehicle         \\
		\hline
		vehicle.vin            & String               & VIN of Customer's Vehicle           \\
		\hline
		vehicle.license\_plate & String               & License Plate of Customer's Vehicle \\
		\hline
	\end{tabular}
\end{table}

\textbf{CreateEmployeeType}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type} & \textbf{Description}               \\
		\hline
		email                & String               & Email of Employee                  \\
		\hline
		password             & String               & Password of Employee's Account     \\
		\hline
		first\_name          & String               & First Name of Employee             \\
		\hline
		last\_name           & String               & Last Name of Employee              \\
		\hline
		phone\_number        & String               & Phone Number of Employee           \\
		\hline
		shop\_id             & String               & ID of Shop that Employee Works For \\
		\hline
	\end{tabular}
\end{table}

\textbf{CreateShopOwnerType}

% TODO: Add Shop Fields
\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type} & \textbf{Description}             \\
		\hline
		email                & String               & Email of Shop Owner              \\
		\hline
		password             & String               & Password of Shop Owner's Account \\
		\hline
		first\_name          & String               & First Name of Shop Owner         \\
		\hline
		last\_name           & String               & Last Name of Shop Owner          \\
		\hline
		phone\_number        & String               & Phone Number of Shop Owner       \\
		\hline
		shop.---             & String               & \dots                            \\
		\hline
	\end{tabular}
\end{table}

\textbf{AuthorizeReturnType}

\begin{table}[H]
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Output Name} & \textbf{Output Type} & \textbf{Description} \\
		\hline
		id                   & String               & User ID              \\
		\hline
		firstName            & String               & First Name of User   \\
		\hline
		lastName             & String               & Last Name of User    \\
		\hline
		email                & String               & Email of User        \\
		\hline
		type                 & String               & Type of User         \\
		\hline
	\end{tabular}
\end{table}

\subsubsection{Exported Access Programs}

\begin{center}
	\begin{adjustbox}{width=\textwidth}
		\begin{tabular}{llll}
			\hline
			\textbf{Name}   & \textbf{In}         & \textbf{Out}                         & \textbf{Exceptions}             \\
			\hline
			createCustomer  & CreateCustomerType  & Customer                             & CustomerAlreadyExistsException  \\
			createEmployee  & CreateEmployeeType  & Employee                             & EmployeeAlreadyExistsException  \\
			createShopOwner & CreateShopOwnerType & Employee                             & ShopOwnerAlreadyExistsException \\
			getUserByEmail  & String              & Customer $\lor$ Employee $\lor$ None & UserNotFoundException           \\
			authorize       & String, String      & AuthorizeReturnType                  & UnauthorizeException            \\
			\hline
		\end{tabular}
	\end{adjustbox}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None

\subsubsection{Environment Variables}

User's Display \\ Database

\subsubsection{Assumptions}

None

\subsubsection{Access Routine Semantics}

\noindent createCustomer($customer$):
\begin{itemize}
	\item transition: new Customer(customer), save customer to customer database table
	\item output: $out := (exc = \text{CustomerAlreadyExistsException}$ \\ $\Rightarrow ``\text{User with
			      email address already exists.}" |\ \neg exc \Rightarrow \text{new Customer(\emph{customer})})$
	\item exception: $exc := getUserByEmail(customer.email) \neq \text{None}$ \\ $\Rightarrow
		      \text{CustomerAlreadyExistsException}$
\end{itemize}

\noindent createEmployee($employee$):
\begin{itemize}
	\item transition: new Employee(employee), save employee to employee database table
	\item output: $out := (exc = \text{EmployeeAlreadyExistsException}$ \\ $\Rightarrow ``\text{User with
			      email address already exists.}" |\ \neg exc \Rightarrow \text{new Employee(\emph{employee})})$
	\item exception: $exc := getUserByEmail(employee.email) \neq \text{None}$ \\ $\Rightarrow
		      \text{EmployeeAlreadyExistsException}$
\end{itemize}

\noindent createShopOwner($shopOwner$):
\begin{itemize}
	\item transition: new Employee(shopOwner), save shop owner to employee database table
	\item output: $out := (exc = \text{ShopOwnerAlreadyExistsException}$ \\ $\Rightarrow ``\text{User with
			      email address already exists.}" |\ \neg exc \Rightarrow \text{new Employee(\emph{shopOwner})})$
	\item exception: $exc := getUserByEmail(shopOwner.email) \neq \text{None}$ \\ $\Rightarrow
		      \text{ShopOwnerAlreadyExistsException}$
\end{itemize}

\noindent getUserByEmail($e$):
\begin{itemize}
	\item output: $out :=$ A User such that it contains the email, $e$, from the customer database table or
	      employees database table, else None.
\end{itemize}

\noindent authorize($email, password$):
\begin{itemize}
	\item output: $out := getUserByEmail(email) = \text{User} \Rightarrow $ \\ $(\text{User} = \text{None}
		      \Rightarrow exc = \text{UserNotFoundException} \Rightarrow \text{``User not found."}$ \\ $|\
		      \text{User.password} = password \Rightarrow \text{AuthorizeReturnType}$ \\ $|\ \text{User.password}
		      \neq password \Rightarrow exc = \text{UnauthorizeException} \Rightarrow \text{``Unauthorized"})$
\end{itemize}

\subsubsection{Local Functions}

\noindent hash($s$):
\begin{itemize}
	\item output: $out := \text{hashed value of } s$
\end{itemize}

\newpage

\bibliographystyle{plainnat}
\bibliography{../../../refs/References}

\newpage

\section{Appendix}

\wss{Extra information if required}

\end{document}
